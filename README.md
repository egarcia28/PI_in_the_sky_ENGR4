# PI_in_the_sky_ENGR4
## Planning
### Project Outline
We will create a monocopter (samsara-inspired flying machine) that will liftoff, hover for a few seconds, and then float back to the ground, all while collecting data on the and acceleration. If we have time, we will add a remote control, then try to add directional control.

### Materials
* PICO
* Accelerometer
* 420w brushless motor
* 50A speed controller
* 850mah 11.1v battery
* 3d printed components
* Jumper wires
* Bolts, nuts, and washers
* Aviation Tape
* 9mm Wooden Dowel
* A safe emotional and mental work enviornment
* A collection of cymbals and singing bowls in order to assist in the allignment of chakras

### Function


### What we need to learn
We will need to learn and understand lots of the physics surrounding the balance and lift of the monocopter. For example, on most systems, the center of rotation is the same as the center of mass, but with a monocopter it is displaced slightly leading to more unstable flight if launched from the center of mass rather than rotation.

### How will we know we are succcesful?
We will know we are succesful when we build and code a fully functioning monocopter that is passively stable, collects both altitude and acecleration data, and returns to the ground safely.

### Saftey concerns/Risk Mitigation
#### Concerns
* Uncontrolled flight leading to human + flying machine disagreement
* Fast motor + sharp propeller + human fingers = BAD NEWS BEARS
* Energetic imbalance during project development affecting team well-being
* Overexertion and stress leading to reduced focus and creativity

#### Mitigations
* Motor will not start until saftey switch has been flipped off, and 10 seconds after launch button has been pressed
* Saftey glasses worn AT ALL TIMES while launching
* significant human buffer given to monocopter prior and during launch (20-30 ish ft?)
* Integrate mindfulness practices into weekly team meetings to address and balance energy levels.
* Encourage regular breaks and provide resources for stress management.
* Foster a supportive team environment to share and address individual concerns, promoting overall well-being.
* Periodic group meditation sessions to enhance focus and maintain a harmonious work atmosphere.

### Sketches
#### Code block diagram
![code block diagram](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/code.jpg)

#### Potential design sketches
![design sketches](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/sketch.jpg)

### Schedule
* Week 1 (jan 2 - 5): Finalize CAD and code plans
* Week 2 (jan 8 - 12): Begin CAD and code prototypes
* Week 3 (jan 15 - 19): Work on CAD and code
* Week 4 (jan 22 - 26): Work on CAD and code/wiring
* Week 5 (jan 29 - feb 2): Try to get functional code product
* Week 6 (feb 5 - 9): Work on CAD, troubleshoot code
* Week 7 (feb 12 - 16): Troubleshoot code/wiring
* Week 8 (feb 19 - 23): Finish code and wiring
* Week 9 (feb 26 - mar 1): Finish prototype
* Week 10 (mar 4 - 8): Finalize CAD and circuitboard
* Week 11 (mar 11 - 15): Fabricate CAD design and circuit board
* Week 12 (mar 18 - 22): Build the final product
* Week 13 (mar 25 - 28): Final preparations for the first launch
* Week 14 (Apr 1 - Apr 5): ALIGN ALL CHAKRAS (Muladhara(Spine Chakra), Svadhisthana(Pelvic Chakra), Manipura(Navel Chakra), Anahata(Heart Chakra), Vishuddhi(Throat Chakra), Ajna(Third Eye Chakra), Sahasrara(Crown Chakra)) AND PREPARE
Dive into meditation and mindfulness practices to align the seven chakras, fostering a balanced and focused mindset.
Conduct a thorough review of the project's progress and prepare for the upcoming stages, ensuring every aspect is in harmony.
Address any lingering issues or challenges in both the CAD design and code, aligning every component for a seamless transition to the next phase.

* Week 15 (Apr 8 - Apr 12): USE NEWFOUND POWER TO IMPROVE
Leverage the renewed energy and clarity gained from chakra alignment to enhance the project.
Implement improvements based on feedback and testing from the previous weeks, refining both the hardware and software aspects.
Collaborate with team members to integrate innovative ideas and optimize the overall performance of the prototype.

* Week 16 (Apr 15 - Apr 19): TRANSCEND REALITY AND ASCEND TO ANOTHER REALM
Embrace a forward-thinking mindset and explore possibilities beyond the current scope of the project.
Experiment with advanced features, pushing the boundaries of the design to achieve a truly innovative and exceptional final product.
Conduct comprehensive testing to ensure that the project not only meets but exceeds the initial expectations.

* Week 17 (Apr 22 - Apr 26): REACH NIRVANA
Continue refining and perfecting the project based on insights gained from the transcendental phase.
Prepare documentation for the final product, ensuring clarity for future development or maintenance.
Conduct a final review to guarantee that all components are aligned and the project is ready for launch.

* Week 18 (Apr 29 - May 3): CONTINUE NIRVANA JOURNEY
Address any last-minute adjustments or improvements that may arise during the final preparations.
Conduct a comprehensive review of the entire project to ensure its readiness for launch.

* Week 19 (May 6 - May 10): FINALIZE AND DOCUMENT EXPERIENCE
Wrap up any remaining tasks, ensuring that the project is in its best possible state.
Document the entire development process, including challenges faced and solutions implemented.
Celebrate the successful completion of the project.

* Week 20 (May 13 - May 17): TRANSCENDENTAL REFLECTION AND EVOLUTION
Delve into a profound reflection on the project's launch, transcending conventional analysis.
Explore the ethereal realm of user feedback, seeking insights that go beyond conventional expectations.
Channel the energy of lessons learned into a transformative process, aiming not just for optimization but for the evolution of the project.
Engage in deep contemplation and meditation to tap into a higher state of creativity and insight for the next phases of development.
Embrace the spirit of continuous improvement, aligning not just with user needs but with the project's transcendent potential.
Document the transcendental journey, capturing the essence of growth and evolution that propels the project into a new dimension of success.

# IMPORTANT - THE 7 MONOCOPTER CHAKRAS ARE...
1 - Rotor Root Chakra (Spinadhar):
Location: At the base of the monocopter, where the rotor connects.
Purpose: Grounding and stability, providing a stable foundation for liftoff.

2 - Blade Balance Chakra (LevitaBlade):
Location: Positioned along the length of the rotor blades.
Purpose: Maintaining equilibrium and balance during flight.

3 - Skyward Spiral Chakra (Ascendana):
Location: Hovering above the monocopter's cockpit.
Purpose: Facilitating upward movement and navigation through the skies.

4 - Gyroscopic Gyra Chakra (Spinathought):
Location: Centered within the gyroscopic system.
Purpose: Enhancing agility and responsiveness to pilot's thoughts and commands.

5 - Rotor Resonance Chakra (VibraWing):
Location: Dispersed vibrations throughout the monocopter's frame.
Purpose: Harmonizing the vibrations for smooth and efficient flight.

6 - Avian Awareness Chakra (BirdSight):
Location: Near the visual sensors or cameras on the monocopter.
Purpose: Enhancing situational awareness and vision for safe flying.

7 - Propulsion Powerhouse Chakra (TurboThrusta):
Location: Engine and propulsion system.
Purpose: Channeling and amplifying energy for powerful forward movement.

## CAD

[Link to CAD Model](https://cvilleschools.onshape.com/documents/25e12063cab2a4f64ef09985/w/c376eafbf39511a0f2f7abef/e/96b13dd0f25b07f70c6d5a76?renderMode=0&uiState=665d4fda66f61d0d8f60b6aa)

### Overall concepts based on research:
1. There are three different types of monocopter(which all have their own usual sizes):
  * Sword-Style: Usually large, these have the motor on the opposite side of the wing. [Bad Example](https://www.youtube.com/watch?v=Me9bTUYIJ6c&list=PLzDYnh_tvZtTz4YUezmdNgfOjBsz4fjhH)  
  * T-shape: Usually small, the motor is positioned on an arm at a right angle to the wing. [Example](https://www.youtube.com/watch?v=u23Hqq8QbeE) 
  * Prop-on-Wing: Usually Medium sized, the motor is mounted on the wing. This is the design we went with, because we didn't have the right tools to build a large wing, and we didn't have the right sized motor for a the T-shape. [Example](https://www.youtube.com/watch?v=I_6EjX8T9Ag) 
2. All the monocopters of a comparable size we saw used a brushless DC motor ([BLDC](https://en.wikipedia.org/wiki/Brushless_DC_electric_motor)), which has an incredible thrust to weight ratio, so is perfect for small aircrafts.
3. The wing profile must decrease in angle of attack as it reaches the tip. This is to create equal thrust across the propeller, as seen in commercial propellers.

![blade-pitch](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/116c315f-17cf-48aa-896f-9e41a6a3908a)

4. To achieve optimal thrust, the monocopter should rotate around the base of the wing, on the front.
5. The center of rotation and center of mass are slightly different, but the effect is small enough that it doesn't matter.
6. There are multiple ways to control the direction of a monocopter, you can either use an aileron, or sinusoidal control of the motor (This doesn't matter that much, we didn't reach a stage that we would be able to add directional control).
7. [Wing Loading](https://en.wikipedia.org/wiki/Wing_loading#:~:text=Wing%20loading%20is%20a%20useful,have%20a%20lower%20stalling%20speed.) should be lower than 10 kg/m^2

## Research links
[My Best Friends EVAR!!](https://www.youtube.com/@airlabsutd2880/videos)

[SUTD Airlab's Design](https://www.youtube.com/watch?v=I_6EjX8T9Ag)

[Other Cool Prop-on-wing](https://www.youtube.com/watch?v=4-bzkRC0yoo)

[Other T-shape](https://ifl.ae.gatech.edu/2020/05/20/monocopter-zhiyuan-nick-zhang/)

[Another Banger by SUTD Airlab](https://www.bitcraze.io/2022/08/single-actuator-monocopters-sams/)

[Big Bad Science paper about flight dynamics](https://www.sciencedirect.com/science/article/abs/pii/S1270963820310634)

[Center of rotation stuff](https://physics.stackexchange.com/questions/212931/instantaneous-centre-of-rotation)

[Google patent for monocopter](https://patents.google.com/patent/US8366055B2/en)

[Lockheed Martin's Monocopter](https://www.youtube.com/watch?v=jtU1ZsjAqsE)

[Really Fun Monocopter](https://www.youtube.com/watch?v=HCg5Zve1oao)


## Basic Design:

![Basic Design For Wing](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/33724939-66e7-4272-9635-c159ba56d0ff)

This basic design is based on [SUTD's AIR Lab's design](https://www.youtube.com/watch?v=I_6EjX8T9Ag). We never printed this version, because there were too many things to tweak and fix. However, this was the first time we got to visualize what the final project would resemble. Also around this time I started…

### CFD!!!:
Computational fluid dynamics, or CFD ([Wikipedia link to spare you a google](https://en.wikipedia.org/wiki/Computational_fluid_dynamics#:~:text=Computational%20fluid%20dynamics%20(CFD)%20is,problems%20that%20involve%20fluid%20flows.)) is basically asking a computer to test if something works. In a professional setting, this greatly decreases prototype material costs, cuts the cost of using an air tunnel, and can be a very powerful tool to test a design quickly. The two CFD programs I used were [ANSYS student](https://www.ansys.com/academic/students/ansys-student) and [SimScale](https://www.simscale.com/) both of which are free!(under a few conditions). I ended only using SimScale for simulation, because ANSYS would've taken to long to learn (Simscale is basically a kiddie version of ANSYS). First I simulated the airfoil by itself 
![content](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/a8992b73-74a3-4100-91fb-7e482f47b8d5)

and then I simulated the whole rotating design 
![Screenshot 2024-06-03 12 37 06 AM](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/79abe983-0b2f-4778-904a-f44e1b9b9372)

Both simulations showed positive result (downward thrust in both), which lead me to me attempting my…
 
## First Design:

![Previous Design For Wing](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/9c649523-cb9f-4790-bf37-fd0715f5840c)

![Top view of V1 wing](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/v1%20top%20wing.jpg)
_Top view of V1 wing_

After tuning up the basic design (somehow the first design didn't even use airfoil???? I guess I just decided to freehand it??????(don't worry I added an airfoil before I printed)), I printed out the first prototype, which looked much like my friends at SUTD's. However, see issues - first launch, which lead me to redesign the basket, and issues - second launch lead me to doubt the amount of lift generated by the airfoil, so… 

## Final Design:
I changed from NACA 2415 to NACA 6409, prioritizing the lift coefficient at 0 degrees angle of attack. Also, the lid to the counterweight is  In the process, I moved the motor housing to the end, and changed the access to the motor bolts. I designed 3D skids, as issues - second launch had convinced us that launching off of the pole did not work. This is the monocopter that you see in launches 3 - 5.
![Final CAD Wing](https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/fd228e67-4a2e-41d5-9fa1-883403526a57)

![Profile v3](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/profile%20v3.jpg)
_Side profile of V3_

![Top view v3](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/top%20view%20v3%20(1).jpg)
_Top view of V3_
  
## Circuit Diagram
![Wiring Diagram](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/wiring.jpg)
_This is our circuit diagram, we used an integrated circuit board for our final product_

## Motor Shenanigans
After some very preliminary research we quickly realized that we would have to use a brushless motor for its excellent weight to thrust ratio, making it perftect for anything airborne. However, when looking for examples of using a brushless motor with circuit python/a raspberry pico we found next to nothing (save [this](https://hackaday.io/project/167826-brushless-nerf-titan50) nerf gun). After much fiddling and testing we settled on a solution. Using an Electronic Speed Controller, a small and compact 850mah 11.1v 3 cell lipo battery, and the [Samguk](https://www.getfpv.com/dys-samguk-series-wei-2207-2300kv-motor.html) brushless motor (SAMGUK in hand, the world I had), we were able to get the brushless motor working. Because brushless motors (like continuous servos) run with PWM, we can just treat is as such. Inversely, brushless motors do need to be calibrated which took some figuring out (lots of listening to subtley different beeps) but we eventually got it down and detailed everything here.

#### Step by Step calibration
* Step 1: Connect the signal pin and ground pin from the ESC to the pico and wire a potentiometer referencing ![this]() wiring diagram
* Step 2: Run ![this]() calibration code on the pico
* Step 3: Ensure that the potentiometer is in the full throttle position and connect the battery to the ESC
* Step 4: Wait for the 2 beeps that indicate the ESC is in calibration mode
* Step 5: Rotate the potentiometer to its lowest throttle position and wait for the beeps that indicate that the motor is calibrated

This code can also help give a foundation on how to control the motor, -1 is its lowest throttle position and 1 is its highest.

## Code

Woops!

## Failed launches and other issues
#### 1st Launch

https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/69b73770-86e2-46dc-af3f-addbff94155d

_A video of our 1st launch attempt_

For our first 2 launches we opted to use a pole to launch off of. Our idea was that the monocopter would be free to spin about its center of rotation/COM which would be impaled by the pole, the monocopter would then produce upwards thrust and move up off the pole. Obviously this came with some challenges evident in the first 2 launch videos. The pole created immense forces on the monocopter that essentially tore it apart, in this video you can see the electronics compartment break and fly off.

#### 2nd Launch

https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/a6804a56-957a-4fab-a2d4-1103b6716793

_A video of our 2nd launch attempt_

We again opted to use a pole for our second launch, making changes to the support for the electronics cabin and other small changes to the wing's design (a groove for the motor's wires rather than a hole through the wing, flipping the electronics cabin and removing honycombing, etc.). This launch also suffured due to our metheod of launching, the pole again created huge force on the wing leading to the motor flying off a solid 30ft! More importantly, after this launch we decided that the pole was actually keeping us on the ground.

#### 3rd Launch

![3rd Launch]()

_A video of our 3rd launch attempt_
For our 3rd launch we decided to transition to another design for launching. We created a pair of skids to add to the wing so it could freely rotate on the ground allowing the monocopter to find its own center of rotation. We also decided to launch in the basketball court for a smooth floor and protective fences, we also used a large cardboard box to reduce friction even more. The skids worked decently well on the box but we ran into some trouble with it, after the monocopter left the box it skipped off the ground and failed. Luckily due to this new launching method we faced much less damage after the failed launch, the only damage was to the prop which only unscrewed itself from the motor.

#### 4th/5th Launch
![4th Launch](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/Video2%20(1).mov)
_A video of our 4th launch attempt_

  
![5th Launch](https://github.com/egarcia28/PI_in_the_sky_ENGR4/blob/main/images/Video3%20(1).mov)
_A video of our 5th launch attempt_
  
We kept with the pole-less launch technique in the basketball court for the 4th and 5th launches, however, we decided against using the cardboard box base due to the skipping it caused in our 3rd launch. Generally the launches went well and the monocopter even left the ground (albeit while upside down). The primary issue with these launches was the design of the skids, they had too much friction and caused the monocopter to skip, eventually flipping over. The non pole launching method ended up being significantly better, even allowing us to test 2 times in one day due to the lack of intense force created by the pole.


## Data Analysis

[Link to Data](https://docs.google.com/spreadsheets/d/1bM0AhUifLfCkbIBh3z-04M-wDFiiEIocgrdV81zR7K8/edit?usp=sharing)

https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/b57e180a-b8e6-4365-b505-820613dcf733

Note: The last section should read "Prop Unscrews" instead of "Prop," but for some reason the video didn't want to do that, so I respected its' decision.

## Ramifications of data:
### Problems
1. Landing gear design needs to be changed, as the inversions are clearly caused by the bumps. 
2. Things to fix with data collection
* Accelerometer is not positioned well to determine the orientation of the craft
* Accelerometer at rest reads 12.912 m/s acceleration, misreading somehow
* End noise is unexplained, did the accelerometer come lose?
* In raw data the time reset halfway through?
### Data:
1.Rotational acceleration due to prop thrust is around 5.59 rad/s^2 (Data: 1 rotation from rest takes 1.5 seconds)
2.Using the [lift formula](https://www.grc.nasa.gov/www/k-12/VirtualAero/BottleRocket/airplane/lifteq.html#:~:text=The%20lift%20equation%20states%20that,times%20the%20wing%20area%20A.&text=For%20given%20air%20conditions%2C%20shape,Cl%20to%20determine%20the%20lift.), and experimental data for [Lift Coefficient](https://www.jetir.org/papers/JETIR2104199.pdf), and [Air Density](https://macinstruments.com/blog/what-is-the-density-of-air-at-stp/#:~:text=According%20to%20the%20International%20Standard,%3A%200.0765%20lb%2Fft%5E3), and data from the model, (335 g for mass, 0.0522 m^2 for area of wing, radius = 0.284 m) and some math for rotation, we get that it would have to be rotating at a speed of 70.593 rad/s (11.2 rev/s) to achieve enough lift for liftoff. Based on these results I would recommend a change to the wing which creates more lift, either a change of airfoils or increasing angle of attack or area of wing, which would increase the lift generated by the wing.

# Final reflection:
## What I'd fix if I had more time:
1. MORE LIFT. in data, I discuss this more
2. Move the lid of the counterweight back to the top, for better access
3. Change the design of the skids to reduce forward pitch
4. Bring back the cardboard, to reduce friction on the launching ground 
## Regrets:
* We should have abandoned the pole after the first launch
* We should have focused more on data, as our data collection is very limited
* Benny was so so close to flying!!! We should've stuck to the schedule more. 
## Final Thoughts:
The more I think about it, this was crazy ambitious project. There is very little out there about monocopters (Actually some guy, Francis Graham wrote a whole book about them, but it's out of stock \(●´⌓`●)/ ), except a whole lot of videos where they work perfectly and never explain it. We took a lot of enthusiasm and optimism from those videos, but in terms of content, they really didn't help. Also, the physics behind the monocopter is very complex (Mr. Manning said "ask Mr. Eckols" Mr Eckols said "Weeelllll, bErNioUli's principle is…" ) and may require many more brain cells than could be mustered from our undeveloped frontal lobes. Other troubles included our initial use of a center stake on the first two launches, which never was going to work out, and that our overpowered motor keep on ripping pieces off(And we never even balanced our chakras!). However, my adventures with Benny were not fruitless. Along the way, I learned some of CFD, and though it didn't help in the slightest for Benny's flights, CFD is a powerful tool for projects and something I'm definitely going to use in the future. I also got up close and personal with BLDC motors, and learned that they're just big continuous servos if you treat them nicely. And like every book, the real friends were the prize you made along the way. BENNY 4EVER!

<div align="center">
	<img src="https://github.com/egarcia28/PI_in_the_sky_ENGR4/assets/113209502/40c1150c-5168-432b-9b6c-262b4e0f4fab">
</div>




